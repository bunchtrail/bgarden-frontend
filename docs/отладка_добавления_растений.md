# Отладка проблемы добавления растений через модуль карты

## Описание проблемы

При попытке добавить растение через модуль карты в консоли отображается сообщение о том, что данные отправляются в API, но запись в базу данных не добавляется.

```
specimenService.ts:54 Отправляем данные в API: {
  "id": 0,
  "sectorType": 0,
  "inventoryNumber": "123",
  "russianName": "ыыы",
  "latinName": "ыыы",
  "genus": "ыы",
  "species": "ыы",
  "familyId": 2,
  "regionId": 1,
  "latitude": 55.5113333384196,
  "longitude": 37.1724637625874
}
```

## Внесенные изменения для отладки

1. **Улучшены логи в specimenService.ts**:

   - Добавлено подробное логирование URL, заголовков и параметров запроса
   - Добавлена детальная обработка ошибок
   - Добавлена альтернативная попытка отправки через Fetch API при ошибке axios

2. **Улучшено логирование в PlantAddForm.tsx**:
   - Добавлено отслеживание ответа API
   - Улучшена обработка ошибок с выводом подробной информации

## Возможные причины проблемы

1. **Проблемы с аутентификацией**:

   - Отсутствие или недействительный токен авторизации
   - Недостаточные права для выполнения операции

2. **Проблемы с форматом данных**:

   - Неверный формат JSON
   - Отсутствие обязательных полей в модели Specimen
   - Невалидные значения (например, неверный формат координат)

3. **Проблемы с конфигурацией запроса**:

   - Неверные заголовки запроса
   - Проблемы с CORS
   - Неверный URL конечной точки API

4. **Проблемы на стороне сервера**:
   - Ошибки валидации данных
   - Внутренние исключения, которые не логируются в ответе

## Как проверить

### 1. Проверка логов в консоли браузера

После внесенных изменений в консоли браузера будет отображаться расширенная информация:

- URL запроса
- Заголовки запроса
- Данные запроса
- Ответ сервера или детали ошибки

### 2. Проверка прав доступа

Убедитесь, что вы авторизованы в системе и имеете права на добавление образцов.

### 3. Ручная проверка API через инструменты разработчика

Используйте вкладку "Network" в DevTools для проверки:

- Статуса запроса (200, 400, 401, 500 и т.д.)
- Заголовков ответа
- Тела ответа

### 4. Проверка бекенд-логов

Запросите у разработчиков бекенда проверить логи сервера во время выполнения запроса.

## Решения

### Если проблема в аутентификации:

- Проверьте состояние токена в LocalStorage
- Проверьте срок действия токена
- Попробуйте выйти из системы и войти заново

### Если проблема в формате данных:

- Проверьте соответствие полей модели требованиям API
- Проверьте типы данных (особенно числовые и булевы значения)

### Если проблема в CORS:

- Проверьте настройки CORS на сервере
- Убедитесь, что запрос отправляется на правильный домен

### Если проблема в конфигурации:

- Проверьте настройки API_URL в .env файле
- Убедитесь, что конечная точка API существует и доступна

## Временное решение

Если проблема сохраняется, можно временно использовать прямое добавление образцов через модуль specimens, минуя модуль карты.
