# Документация модуля карты

## Управление растениями на карте

### 1. Добавление нового растения на карту

1. Пользователь выбирает режим добавления нового растения через интерактивную карту.
2. Вводит систематические сведения, место произрастания и особенности ухода.
3. Система проверяет корректность данных.
4. Если данные корректны, происходит успешное сохранение.

### 2. Редактирование информации о растении

1. Пользователь выбирает существующее растение на карте.
2. Пользователь редактирует систематические сведения, местоположение и другие характеристики растения.
3. Система проверяет и сохраняет внесённые изменения.

### 3. Удаление растения с карты

1. Пользователь выбирает точку растения на карте.
2. Пользователь удаляет точку растения, и система обновляет данные.

## API контроллера карты

### Маркеры растений (PlantMarkers)

#### GET: api/Map/markers

Получает все маркеры растений на карте.

**Возвращает:** Список объектов `MapMarkerDto`, представляющих маркеры растений на карте.

#### GET: api/Map/markers/{id}

Получает маркер растения по его идентификатору.

**Параметры:**

- `id` (int): Идентификатор маркера растения.

**Возвращает:** Объект `MapMarkerDto` с информацией о маркере растения или статус 404 Not Found, если маркер не найден.

#### GET: api/Map/markers/specimen/{specimenId}

Получает все маркеры, связанные с определенным экземпляром растения.

**Параметры:**

- `specimenId` (int): Идентификатор экземпляра растения.

**Возвращает:** Список объектов `MapMarkerDto`, связанных с указанным экземпляром растения.

#### POST: api/Map/markers

Создает новый маркер растения на карте.

**Тело запроса:**

- `CreateMapMarkerDto`: Данные для создания нового маркера растения.

**Возвращает:** Созданный объект `MapMarkerDto` и статус 201 Created с URI нового ресурса.

#### PUT: api/Map/markers

Обновляет существующий маркер растения.

**Тело запроса:**

- `UpdateMapMarkerDto`: Данные для обновления маркера растения.

**Возвращает:** Обновленный объект `MapMarkerDto` или статус 404 Not Found, если маркер не найден.

#### DELETE: api/Map/markers/{id}

Удаляет маркер растения с карты.

**Параметры:**

- `id` (int): Идентификатор маркера растения для удаления.

**Возвращает:** Статус 204 No Content при успешном удалении или статус 404 Not Found, если маркер не найден.

#### GET: api/Map/markers/nearby

Находит маркеры растений в указанном радиусе от заданной точки.

**Параметры запроса:**

- `latitude` (double): Широта центральной точки.
- `longitude` (double): Долгота центральной точки.
- `radiusInMeters` (double, по умолчанию 100): Радиус поиска в метрах.

**Возвращает:** Список объектов `MapMarkerDto`, находящихся в указанном радиусе.

### Области карты (MapAreas)

#### GET: api/Map/areas

Получает все области на карте.

**Возвращает:** Список объектов `MapAreaDto`, представляющих области на карте.

#### GET: api/Map/areas/{id}

Получает область карты по её идентификатору.

**Параметры:**

- `id` (int): Идентификатор области.

**Возвращает:** Объект `MapAreaDto` с информацией об области или статус 404 Not Found, если область не найдена.

#### POST: api/Map/areas

Создает новую область на карте.

**Тело запроса:**

- `CreateMapAreaDto`: Данные для создания новой области.

**Возвращает:** Созданный объект `MapAreaDto` и статус 201 Created с URI нового ресурса.

#### PUT: api/Map/areas

Обновляет существующую область карты.

**Тело запроса:**

- `UpdateMapAreaDto`: Данные для обновления области.

**Возвращает:** Обновленный объект `MapAreaDto` или статус 404 Not Found, если область не найдена.

#### DELETE: api/Map/areas/{id}

Удаляет область с карты.

**Параметры:**

- `id` (int): Идентификатор области для удаления.

**Возвращает:** Статус 204 No Content при успешном удалении или статус 404 Not Found, если область не найдена.

### Пользовательские схемы карты (CustomMapScheme)

#### POST: api/Map/customscheme

Загружает пользовательскую схему карты.

**Параметры запроса:**

- `mapScheme` (IFormFile): Файл с пользовательской схемой карты.

**Возвращает:** Статус успешной загрузки схемы (true/false).

## Структуры данных

### MapMarkerDto

Представляет маркер растения на карте.

### CreateMapMarkerDto

Содержит данные для создания нового маркера растения.

### UpdateMapMarkerDto

Содержит данные для обновления существующего маркера растения.

### MapAreaDto

Представляет область на карте (например, зону произрастания определенных видов растений).

### CreateMapAreaDto

Содержит данные для создания новой области на карте.

### UpdateMapAreaDto

Содержит данные для обновления существующей области на карте.
