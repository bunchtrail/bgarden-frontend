# Модуль «Map»

## Описание

Модуль «Map» предназначен для работы с интерактивной картой в приложении Botanical Garden. Он обеспечивает:

- отображение и управление картами;
- загрузку пользовательских карт;
- разделение доступа между сотрудниками ботанического сада и обычными клиентами;
- управление информацией о растениях (добавление, редактирование, удаление);
- удобный интерфейс взаимодействия с геоданными.

Модуль реализован с использованием современных подходов React и TypeScript, а также интегрируется с API для актуализации и обработки данных.

## Основные компоненты и функционал

### Компоненты карты

- **`MapContainer.tsx`** — инициализация карты и базовая настройка отображения.
- **`MapMarker.tsx`** — визуализация растений на карте в виде интерактивных маркеров.
- **`MapLegend.tsx`** — отображение условных обозначений, категорий и справочной информации.

### Управление растениями

- **`PlantAddForm.tsx`** — форма добавления нового растения на карту.
- **`PlantEditForm.tsx`** — форма редактирования существующего растения.
- **`PlantDeleteModal.tsx`** — модальное окно подтверждения удаления растения.

### Элементы управления

- **`MapActions.tsx`** — кнопки и элементы управления для переключения режимов карты (добавление, выбор, редактирование).

### Контексты и хуки

- **`MapContext.tsx`** — контекст для хранения общего состояния карты (масштаб, координаты, выбранный элемент).
- **`useMap.ts` и `usePlantOperations.ts`** — кастомные хуки для удобного управления логикой карты и операций с растениями.

### Сервисы и типизация

- **Папка `services/`** — API-сервисы для выполнения операций CRUD и получения геоданных.
- **Папка `types/`** — строгая типизация сущностей и данных, используемых в модуле.

## Логика работы с растениями на карте

### 1. Добавление растения

1. Пользователь выбирает режим добавления растения на карте.
2. Заполняет систематические сведения, местоположение и рекомендации по уходу.
3. Система проводит проверку введённых данных.
4. При корректности данные успешно сохраняются.

### 2. Редактирование растения

1. Пользователь выбирает существующее растение на карте.
2. Редактирует необходимую информацию (сведения, местоположение, характеристики).
3. Система проверяет данные и сохраняет изменения.

### 3. Удаление растения

1. Пользователь выбирает растение на карте.
2. Подтверждает удаление через интерфейс.
3. Система удаляет растение и обновляет карту.

## Итог

| Возможности модуля          | Компоненты и файлы                            | Польза                                |
| --------------------------- | --------------------------------------------- | ------------------------------------- |
| Отображение и загрузка карт | MapContainer, MapMarker                       | Простое и понятное взаимодействие     |
| Управление растениями       | PlantAddForm, PlantEditForm, PlantDeleteModal | Удобное добавление и редактирование   |
| Доступ по ролям             | Сервисы авторизации и API                     | Безопасность и контроль данных        |
| Структурированность данных  | Контексты, хуки, типизация                    | Поддерживаемость и расширяемость кода |
